(this["webpackJsonpez-split"]=this["webpackJsonpez-split"]||[]).push([[0],[,,function(e,t,s){e.exports={Results:"Results_Results__o_qOJ",Header:"Results_Header__1oUl5",ResultItems:"Results_ResultItems__3P7H1",PersonsItems:"Results_PersonsItems__1CdW5",PersonRow:"Results_PersonRow__17H_X",PersonNameShowDetails:"Results_PersonNameShowDetails__3l6Ub",Person:"Results_Person__2kMfo",NameShowDetails:"Results_NameShowDetails__1sOpJ",PersonName:"Results_PersonName__15QHJ",ShowDetailsButton:"Results_ShowDetailsButton__2J8XH",ShowTrue:"Results_ShowTrue__2xOfw",ShowFalse:"Results_ShowFalse__1eGsv",Amount:"Results_Amount__2TLzh",Details:"Results_Details__2sRcC",DetailRow:"Results_DetailRow__3HBMx",FeesAndTotal:"Results_FeesAndTotal__1ONjP",FeeItem:"Results_FeeItem__1N6Zd",FeeName:"Results_FeeName__2XSGu",GrandTotal:"Results_GrandTotal__2G_zw",GrandTotalText:"Results_GrandTotalText__3D0qx",Buttons:"Results_Buttons__2wuVJ",ViewReceiptButton:"Results_ViewReceiptButton__3drb7",CloseButton:"Results_CloseButton__1JnmL"}},,function(e,t,s){e.exports={AdditionalFees:"AdditionalFees_AdditionalFees__dk3QX",Fees:"AdditionalFees_Fees__3iFeH",Fee:"AdditionalFees_Fee__2_LrH",FeeName:"AdditionalFees_FeeName__mFAAF",AddFeeButton:"AdditionalFees_AddFeeButton__2cId2",ModalContent:"AdditionalFees_ModalContent__3HvZD",ModalInputField:"AdditionalFees_ModalInputField__gU26Q",Buttons:"AdditionalFees_Buttons__JBUN3",SaveButton:"AdditionalFees_SaveButton__2kHqR",CancelButton:"AdditionalFees_CancelButton__HIUqN",InputField:"AdditionalFees_InputField__s3ADS",Total:"AdditionalFees_Total__2MaaU",FixedAmount:"AdditionalFees_FixedAmount__1nI3o"}},,,,,function(e,t,s){e.exports={Receipt:"Receipt_Receipt__ONY6r",ReceiptItems:"Receipt_ReceiptItems__sVF2q",Items:"Receipt_Items__15j7W",Item:"Receipt_Item__3Kvl8",FeesAndTotals:"Receipt_FeesAndTotals__1Fjkz",FeeItem:"Receipt_FeeItem__3K7ka",FeeName:"Receipt_FeeName__1Z9wl",GrandTotal:"Receipt_GrandTotal__27fMZ",GrandTotalText:"Receipt_GrandTotalText__Hl_eN",Buttons:"Receipt_Buttons__3ZuTu",BackToBillButton:"Receipt_BackToBillButton__Pb9Rn",CloseButton:"Receipt_CloseButton__3bsKj"}},,function(e,t,s){e.exports={AddItems:"AddItems_AddItems__mnJ3w",Subtotal:"AddItems_Subtotal__ARiNr",SubtotalText:"AddItems_SubtotalText__39Mrl",Items:"AddItems_Items__25Gnh",ItemRow:"AddItems_ItemRow__1Y89L",RemoveItemButton:"AddItems_RemoveItemButton__1Wwbr",AddItemButton:"AddItems_AddItemButton__3aO8s",ModalContent:"AddItems_ModalContent__22bWN",InputField:"AddItems_InputField__1ZzmD",ErrorMessage:"AddItems_ErrorMessage__gXlhN",Buttons:"AddItems_Buttons__39c3S",AddButton:"AddItems_AddButton__1WceI",CancelButton:"AddItems_CancelButton__2NnHV"}},function(e,t,s){e.exports={ClaimItems:"ClaimItems_ClaimItems__3JcUR",Persons:"ClaimItems_Persons__2P7BZ",Person:"ClaimItems_Person__1eMbM",CurrentPerson:"ClaimItems_CurrentPerson__1PAys",AddPersonButton:"ClaimItems_AddPersonButton__1wVsm",EditPerson:"ClaimItems_EditPerson__1nPEU",PersonNameField:"ClaimItems_PersonNameField__1m2SC",RemovePersonButton:"ClaimItems_RemovePersonButton__16QFp",Prompt:"ClaimItems_Prompt__3RJCM",Items:"ClaimItems_Items__1N__7",ItemRow:"ClaimItems_ItemRow__2FLCq",ClaimButton:"ClaimItems_ClaimButton__3iwOK",Subtotal:"ClaimItems_Subtotal__1U-sW",SubtotalText:"ClaimItems_SubtotalText__tzJoO"}},function(e,t,s){e.exports={Start:"Start_Start__2KHhj",Brand:"Start_Brand__3T9Rp",Intro:"Start_Intro__1RSUu",InputFields:"Start_InputFields__2-Z-7",InputLabel:"Start_InputLabel__3fTlP",Input:"Start_Input__1QcZ_",ErrorMessage:"Start_ErrorMessage__12x0G"}},function(e,t,s){e.exports={RegularItem:"Item_RegularItem__31RIZ",ItemName:"Item_ItemName__1ZGeh",ItemPrice:"Item_ItemPrice___QGZc",ClaimedItem:"Item_ClaimedItem__2m9ot",ItemInfo:"Item_ItemInfo__2VYd8",Persons:"Item_Persons__FFxxV",Person:"Item_Person__3sQ35"}},function(e,t,s){e.exports={Tax:"Tax_Tax__Rj8DN",PromptAndButton:"Tax_PromptAndButton__2AB3o",SelectAllButton:"Tax_SelectAllButton__aHnjW",Items:"Tax_Items__2CVV6",ItemRow:"Tax_ItemRow__3JQYP",Checkbox:"Tax_Checkbox__1V879"}},,,,function(e,t,s){e.exports={Header:"Header_Header__FXvex",BackButton:"Header_BackButton__2gUwK",EventName:"Header_EventName__3OeXA"}},,,,,function(e,t,s){e.exports={ProceedDiv:"ProceedDiv_ProceedDiv__1wLgH",ProceedButton:"ProceedDiv_ProceedButton__1YV3e"}},,function(e,t,s){e.exports={Backdrop:"Backdrop_Backdrop__1llUs"}},function(e,t,s){e.exports={Modal:"Modal_Modal__1Mp7D"}},,,,,,,,,,,,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),r=s(17),o=s.n(r),c=s(3),l=s(18),i=(s(39),s(5)),d=s(6),u=s(8),m=s(7),p=s(24),j=s.n(p),h=function(e){return Object(a.jsx)("div",{className:j.a.ProceedDiv,children:Object(a.jsx)("button",{className:j.a.ProceedButton,onClick:e.clicked,children:e.children})})},b="ON_START",_="NEXT_PAGE",x="ADD_ITEM",O="REMOVE_ITEM",f="GO_BACK",v="CHANGE_NAME",N="ADD_PERSON",I="REMOVE PERSON",P="CLAIM_ITEM",g="TAX_ITEM",F="SELECT_ALL_ITEMS",C="ON_SPLIT",A=s(13),S=s.n(A),B=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={eventName:"",amountPeople:"",eventNameEmpty:!1,amountPeopleEmpty:!1},e.nameChangedHandler=function(t){e.setState({eventName:t.target.value,eventNameEmpty:!1})},e.amountPeopleChangedHandler=function(t){e.setState({amountPeople:t.target.value,amountPeopleEmpty:!1})},e.checkInput=function(){var t=!1;""===e.state.eventName.trim()&&(e.setState({eventNameEmpty:!0,eventName:""}),t=!0),""===e.state.amountPeople&&(e.setState({amountPeopleEmpty:!0}),t=!0),!1===t&&e.props.onStart(e.state.eventName,e.state.amountPeople)},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:S.a.Start,children:[Object(a.jsx)("p",{className:S.a.Brand,children:"ez split"}),Object(a.jsxs)("div",{className:S.a.Intro,children:[Object(a.jsx)("h1",{style:{marginTop:"0px"},children:"Split a Bill"}),Object(a.jsx)("p",{children:"Taxes, tips, we got you covered"})]}),Object(a.jsxs)("div",{className:S.a.InputFields,children:[Object(a.jsx)("p",{className:S.a.InputLabel,children:"Event name"}),Object(a.jsx)("input",{className:S.a.Input,type:"text",placeholder:"e.g Brunch",required:!0,onChange:function(t){return e.nameChangedHandler(t)},value:this.state.eventName}),!0===this.state.eventNameEmpty?Object(a.jsx)("p",{className:S.a.ErrorMessage,children:"Event name is required."}):Object(a.jsx)("p",{className:S.a.ErrorMessage,children:"\xa0"}),Object(a.jsx)("p",{className:S.a.InputLabel,children:"Amount of people"}),Object(a.jsx)("input",{className:S.a.Input,type:"number",placeholder:"e.g 3",required:!0,onChange:function(t){return e.amountPeopleChangedHandler(t)},value:this.state.amountPeople}),!0===this.state.amountPeopleEmpty?Object(a.jsx)("p",{className:S.a.ErrorMessage,children:"Amount of people is required."}):null]}),Object(a.jsx)(h,{clicked:this.checkInput,children:"Let's start"})]})}}]),s}(n.Component),R=Object(c.b)((function(e){return{eventName:e.eventName,amountPeople:e.amountPeople}}),(function(e){return{onStart:function(t,s){return e({type:b,eventName:t,amountPeople:s})}}}))(B),T=s(11),w=s.n(T),k=s(26),y=s.n(k),M=function(e){return e.showBackdrop?Object(a.jsx)("div",{className:y.a.Backdrop,onClick:e.backdropClicked}):null},E=s(27),H=s.n(E),D=function(e){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)(M,{showBackdrop:e.showModal,backdropClicked:e.closeModal}),Object(a.jsx)("div",{className:H.a.Modal,style:{transform:e.showModal?"translateY(0)":"translateY(-100vh)",opacity:e.showModal?"1":"0"},children:e.children})]})},G=s(14),$=s.n(G),L=function(e){var t=Object(a.jsxs)("div",{className:$.a.RegularItem,children:[Object(a.jsx)("p",{className:$.a.ItemName,children:e.itemName}),Object(a.jsxs)("p",{className:$.a.ItemPrice,children:["$",e.itemPrice]})]});return 2===e.currentPage&&e.claimers.length>0&&(t=Object(a.jsxs)("div",{className:$.a.ClaimedItem,children:[Object(a.jsxs)("div",{className:$.a.ItemInfo,children:[Object(a.jsx)("p",{className:$.a.ItemName,children:e.itemName}),Object(a.jsxs)("p",{className:$.a.ItemPrice,children:["$",e.itemPrice]})]}),Object(a.jsx)("div",{className:$.a.Persons,children:e.claimers.map((function(t,s){var n=e.persons.find((function(e){return t===e.personId}));return Object(a.jsx)("div",{className:$.a.Person,children:!0===n.name.includes("Person")?n.name.replace(/\D/g,""):n.name.charAt(0)},s)}))})]})),t},V=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={showModal:!1,itemName:"",itemPrice:"",itemNameEmpty:!1},e.scrollToBottom=function(){e.itemsRef.scrollIntoView({behavior:"smooth"})},e.openModalHandler=function(){e.setState({showModal:!0})},e.closeModalHandler=function(){e.setState({showModal:!1})},e.itemNameChangedHandler=function(t){e.setState({itemName:t.target.value,itemNameEmpty:!1})},e.itemPriceChangedHandler=function(t){var s=t.target.value;if(""!==s){var a=s.length,n=t.target.selectionStart;if(s.indexOf(".")>=0){var r=s.indexOf("."),o=s.substring(0,r),c=s.substring(r);s=(o=o.replace(/\D/g,""))+"."+(c=(c=c.replace(/\D/g,"")).substring(0,2))}else s=s.replace(/\D/g,"");var l=s.length;n=l-a+n,e.setState({itemPrice:s},(function(){e.refs.input.selectionStart=e.refs.input.selectionEnd=n}))}else e.setState({itemPrice:t.target.value})},e.checkInput=function(){var t=!1;""===e.state.itemName.trim()&&(console.log("empty"),e.setState({itemNameEmpty:!0,itemName:""}),t=!0),!1===t&&e.saveItemHandler()},e.saveItemHandler=function(){e.props.onAddItem(e.state.itemName,e.state.itemPrice),e.setState({showModal:!1,itemName:"",itemPrice:""})},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:w.a.AddItems,children:[Object(a.jsxs)(D,{showModal:this.state.showModal,closeModal:this.closeModalHandler,children:[Object(a.jsxs)("div",{className:w.a.ModalContent,children:[Object(a.jsx)("input",{className:w.a.InputField,type:"text",placeholder:"e.g. Coffee",onChange:function(t){return e.itemNameChangedHandler(t)},value:this.state.itemName}),!0===this.state.itemNameEmpty?Object(a.jsx)("p",{className:w.a.ErrorMessage,children:"Item name is required."}):null,Object(a.jsxs)("p",{children:["$",Object(a.jsx)("input",{className:w.a.InputField,ref:"input",type:"text",placeholder:"0.00",onChange:function(t){return e.itemPriceChangedHandler(t)},value:this.state.itemPrice})]})]}),Object(a.jsxs)("div",{className:w.a.Buttons,children:[Object(a.jsx)("button",{className:w.a.AddButton,onClick:this.checkInput,children:"ADD"}),Object(a.jsx)("button",{className:w.a.CancelButton,onClick:this.closeModalHandler,children:"CANCEL"})]})]}),Object(a.jsxs)("div",{className:w.a.Items,children:[this.props.items.map((function(t,s){return Object(a.jsxs)("div",{className:w.a.ItemRow,children:[Object(a.jsx)(L,{itemName:t.name,itemPrice:t.price.toFixed(2),currentPage:e.props.currentPage,claimers:e.props.items[s].claimers}),Object(a.jsx)("button",{className:w.a.RemoveItemButton,onClick:function(){return e.props.onRemoveItem(s)},children:"-"})]},s)})),Object(a.jsx)("div",{ref:function(t){e.itemsRef=t}})]}),Object(a.jsx)("button",{className:w.a.AddItemButton,onClick:this.openModalHandler,children:"+ Add an Item"}),Object(a.jsxs)("div",{className:w.a.Subtotal,children:[Object(a.jsx)("p",{className:w.a.SubtotalText,children:"Subtotal"}),Object(a.jsxs)("p",{children:["$",this.props.subtotal.toFixed(2)]})]}),Object(a.jsx)(h,{clicked:this.props.onNextPage,children:"Next"})]})}}]),s}(n.Component),J=Object(c.b)((function(e){return{subtotal:e.subtotal,items:e.items,currentPage:e.currentPage}}),(function(e){return{onAddItem:function(t,s){return e({type:x,name:t,price:s})},onRemoveItem:function(t){return e({type:O,id:t})},onNextPage:function(){return e({type:_})}}}))(V),U=s(19),Z=s.n(U),q=function(e){return Object(a.jsxs)("div",{className:Z.a.Header,children:[Object(a.jsx)("button",{onClick:e.backClicked,className:Z.a.BackButton,children:"Back"}),Object(a.jsx)("span",{className:Z.a.EventName,children:e.eventName})]})},X=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{eventName:this.props.eventName,backClicked:this.props.onGoBack}),this.props.children]});return this.props.currentPage>0?e:Object(a.jsx)("div",{children:this.props.children})}}]),s}(n.Component),W=Object(c.b)((function(e){return{eventName:e.eventName,currentPage:e.currentPage}}),(function(e){return{onGoBack:function(){return e({type:f})}}}))(X),z=s(12),Q=s.n(z),Y=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={currentPerson:0},e.changePersonHandler=function(t){e.setState({currentPerson:t})},e.removePersonHandler=function(){e.props.onRemovePerson(e.state.currentPerson),0===e.state.currentPerson?e.setState({currentPerson:e.state.currentPerson}):e.setState({currentPerson:e.state.currentPerson-1})},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:Q.a.ClaimItems,children:[Object(a.jsxs)("div",{className:Q.a.Persons,children:[this.props.persons.map((function(t,s){return Object(a.jsx)("div",{className:s===e.state.currentPerson?Q.a.CurrentPerson:Q.a.Person,onClick:function(){return e.changePersonHandler(s)},children:!0===t.name.includes("Person")?t.name.replace(/\D/g,""):t.name.charAt(0)},s)})),Object(a.jsx)("button",{className:Q.a.AddPersonButton,onClick:this.props.onAddPerson,children:"+"})]}),Object(a.jsxs)("div",{className:Q.a.EditPerson,children:[Object(a.jsx)("input",{className:Q.a.PersonNameField,type:"text",value:this.props.persons[this.state.currentPerson].name,onChange:function(t){return e.props.onChangeName(t,e.state.currentPerson)}}),Object(a.jsx)("button",{className:Q.a.RemovePersonButton,onClick:this.removePersonHandler,children:"-"})]}),Object(a.jsxs)("p",{className:Q.a.Prompt,children:["Which items did ",Object(a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.persons[this.state.currentPerson].name})," split?"]}),Object(a.jsx)("div",{className:Q.a.Items,children:this.props.items.map((function(t,s){return Object(a.jsxs)("div",{className:Q.a.ItemRow,children:[Object(a.jsx)(L,{itemName:t.name,itemPrice:t.price.toFixed(2),currentPage:e.props.currentPage,claimers:e.props.items[s].persons,persons:e.props.persons}),Object(a.jsx)("button",{className:Q.a.ClaimButton,onClick:function(){return e.props.onClaimItem(e.state.currentPerson,s)},children:"Claim"})]},s)}))}),Object(a.jsxs)("div",{className:Q.a.Subtotal,children:[Object(a.jsx)("p",{className:Q.a.SubtotalText,children:"Subtotal"}),Object(a.jsxs)("p",{children:["$",this.props.subtotal.toFixed(2)]})]}),Object(a.jsx)(h,{clicked:this.props.onNextPage,children:"NEXT"})]})}}]),s}(n.Component),K=Object(c.b)((function(e){return{items:e.items,persons:e.persons,currentPage:e.currentPage,subtotal:e.subtotal}}),(function(e){return{onChangeName:function(t,s){return e({type:v,event:t,id:s})},onAddPerson:function(){return e({type:N})},onRemovePerson:function(t){return e({type:I,id:t})},onClaimItem:function(t,s){return e({type:P,selectedPerson:t,selectedItem:s})},onNextPage:function(){return e({type:_})}}}))(Y),ee=s(15),te=s.n(ee),se=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:te.a.Tax,children:[Object(a.jsxs)("div",{className:te.a.PromptAndButton,children:[Object(a.jsx)("p",{className:te.a.Prompt,children:"Which items were taxed?"}),Object(a.jsx)("button",{className:te.a.SelectAllButton,onClick:function(){return e.props.onSelectAll()},children:"Select all"})]}),Object(a.jsx)("div",{className:te.a.Items,children:this.props.items.map((function(t,s){return Object(a.jsxs)("div",{className:te.a.ItemRow,children:[Object(a.jsx)(L,{itemName:t.name,itemPrice:t.price.toFixed(2),currentPage:e.props.currentPage,claimers:t.persons}),Object(a.jsx)("input",{className:te.a.Checkbox,type:"checkbox",checked:t.taxed,onChange:function(){return e.props.onTaxItem(s)}})]},s)}))}),Object(a.jsx)(h,{clicked:this.props.onNextPage,children:"NEXT"})]})}}]),s}(n.Component),ae=Object(c.b)((function(e){return{items:e.items,persons:e.persons,currentPage:e.currentPage}}),(function(e){return{onTaxItem:function(t){return e({type:g,selectedItem:t})},onSelectAll:function(){return e({type:F})},onNextPage:function(){return e({type:_})}}}))(se),ne=s(16),re=s(10),oe=s(4),ce=s.n(oe),le=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={fees:[{name:"Tax",amount:"0.00"},{name:"Tip",amount:"0.00"}],grandTotal:e.props.subtotal,showModal:!1,addFeeName:"",addFeeAmount:""},e.feeChanged=function(t,s){var a=Object(re.a)(e.state.fees),n=Object(ne.a)({},a[s]),r=t.target.value;if(""===r)return n.amount=t.target.value,a[s]=n,void e.setState({fees:a});var o=r.length,c=t.target.selectionStart;if(r.indexOf(".")>=0){var l=r.indexOf("."),i=r.substring(0,l),d=r.substring(l);(i=i.replace(/\D/g,"")).length>1&&(i=i.replace(/\b0+/g,"")),r=i+"."+(d=(d=d.replace(/\D/g,"")).substring(0,2))}else r=r.replace(/\D/g,"").replace(/\b0+/g,"");n.amount=r,a[s]=n;var u=r.length;c=u-o+c,e.setState({fees:a},(function(){e.refs.input1.selectionStart=e.refs.input1.selectionEnd=c}))},e.updateTotal=function(t,s){var a=e.state.grandTotal;if(""!==t.target.value&&parseFloat(t.target.value)>0){a=e.props.subtotal;for(var n=0;n<e.state.fees.length;n++)n!==s&&(a+=parseFloat(e.state.fees[n].amount));a+=parseFloat(t.target.value)}var r=Object(re.a)(e.state.fees),o=Object(ne.a)({},r[s]);o.amount=parseFloat(t.target.value).toFixed(2),r[s]=o,e.setState({grandTotal:a,fees:r})},e.openModalHandler=function(){e.setState({showModal:!0})},e.closeModalHandler=function(){e.setState({showModal:!1,addFeeName:0,addFeeAmount:0})},e.addFeeNameChangedHandler=function(t){e.setState({addFeeName:t.target.value})},e.addFeeAmountChangedHandler=function(t){var s=t.target.value;if(""!==s){var a=s.length,n=t.target.selectionStart;if(s.indexOf(".")>=0){var r=s.indexOf("."),o=s.substring(0,r),c=s.substring(r);s=(o=o.replace(/\D/g,""))+"."+(c=(c=c.replace(/\D/g,"")).substring(0,2))}else s=s.replace(/\D/g,"");var l=s.length;n=l-a+n,console.log(n),e.setState({addFeeAmount:s},(function(){e.refs.input2.selectionStart=e.refs.input2.selectionEnd=n}))}else e.setState({addFeeAmount:t.target.value})},e.addFeeHandler=function(){var t={name:e.state.addFeeName,amount:parseFloat(e.state.addFeeAmount)},s=e.state.grandTotal;s=e.props.subtotal;for(var a=0;a<e.state.fees.length;a++)s+=parseFloat(e.state.fees[a].amount);s+=parseFloat(e.state.addFeeAmount);var n=Object(re.a)(e.state.fees).concat(t);e.setState({fees:n,addFeeName:"",addFeeAmount:"",grandTotal:s,showModal:!1})},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:ce.a.AdditionalFees,children:[Object(a.jsx)(D,{showModal:this.state.showModal,closeModal:this.closeModalHandler,children:Object(a.jsxs)("div",{className:ce.a.ModalContent,children:[Object(a.jsx)("input",{className:ce.a.ModalInputField,ref:"input2",type:"text",placeholder:"e.g. Service Fee",value:this.state.addFeeName,onChange:this.addFeeNameChangedHandler}),Object(a.jsxs)("p",{children:["$",Object(a.jsx)("input",{className:ce.a.ModalInputField,type:"text",placeholder:"0.00",value:this.state.addFeeAmount,onChange:this.addFeeAmountChangedHandler})]}),Object(a.jsxs)("div",{className:ce.a.Buttons,children:[Object(a.jsx)("button",{className:ce.a.SaveButton,onClick:this.addFeeHandler,children:"Save"}),Object(a.jsx)("button",{className:ce.a.CancelButton,onClick:this.closeModalHandler,children:"Cancel"})]})]})}),Object(a.jsxs)("div",{className:ce.a.Fees,children:[Object(a.jsxs)("div",{className:ce.a.Fee,children:[Object(a.jsx)("p",{className:ce.a.FeeName,children:"Subtotal"}),Object(a.jsxs)("p",{className:ce.a.FixedAmount,children:["$",this.props.subtotal.toFixed(2)]})]}),this.state.fees.map((function(t,s){return Object(a.jsxs)("div",{className:ce.a.Fee,children:[Object(a.jsx)("p",{className:ce.a.FeeName,children:t.name}),Object(a.jsxs)("p",{children:["$",Object(a.jsx)("input",{className:ce.a.InputField,ref:"input1",type:"text",value:t.amount,onBlur:function(t){return e.updateTotal(t,s)},onChange:function(t){return e.feeChanged(t,s)}})]})]},s)}))]}),Object(a.jsx)("button",{className:ce.a.AddFeeButton,onClick:this.openModalHandler,children:"+ Additional fees"}),Object(a.jsxs)("div",{className:ce.a.Total,children:[Object(a.jsx)("p",{className:ce.a.FeeName,children:"Grandtotal"}),Object(a.jsxs)("p",{className:ce.a.FixedAmount,children:["$",this.state.grandTotal.toFixed(2)]})]}),Object(a.jsx)(h,{clicked:function(){return e.props.onSplit(e.state.fees,e.state.grandTotal)},children:"Split"})]})}}]),s}(n.Component),ie=Object(c.b)((function(e){return{subtotal:e.subtotal}}),(function(e){return{onSplit:function(t,s){return e({type:C,fees:t,grandTotal:s})}}}))(le),de=s(2),ue=s.n(de),me=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={showDetails:new Array(e.props.persons.length).fill(!1)},e.showDetailsHandler=function(t){var s=Object(re.a)(e.state.showDetails);s[t]=!s[t],e.setState({showDetails:s})},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:ue.a.Results,children:[Object(a.jsx)("h2",{className:ue.a.Header,children:"Your Split Bill"}),Object(a.jsxs)("div",{className:ue.a.ResultItems,children:[Object(a.jsx)("div",{className:ue.a.PersonsItems,children:this.props.persons.map((function(t,s){return Object(a.jsxs)("div",{className:ue.a.PersonsRows,children:[Object(a.jsxs)("div",{className:ue.a.PersonRow,children:[Object(a.jsxs)("div",{className:ue.a.PersonNameShowDetails,children:[Object(a.jsx)("div",{className:ue.a.Person,children:!0===t.name.includes("Person")?t.name.replace(/\D/g,""):t.name.charAt(0)}),Object(a.jsxs)("div",{className:ue.a.NameShowDetails,children:[Object(a.jsx)("p",{className:ue.a.PersonName,children:t.name}),Object(a.jsxs)("button",{className:ue.a.ShowDetailsButton,onClick:function(){return e.showDetailsHandler(s)},children:["Show details ",Object(a.jsx)("span",{className:!0===e.state.showDetails[s]?ue.a.ShowTrue:ue.a.ShowFalse,children:">"})]})]})]}),Object(a.jsxs)("div",{className:ue.a.Amount,children:["$",(Math.round(100*t.total)/100).toFixed(2)]})]}),Object(a.jsx)("div",{className:ue.a.Details,children:!0===e.state.showDetails[s]?Object(a.jsxs)("div",{children:[t.items.map((function(t,s){var n=e.props.items.find((function(e){return t===e.itemId}));return Object(a.jsxs)("p",{className:ue.a.DetailRow,children:[Object(a.jsx)("span",{children:n.name}),Object(a.jsxs)("span",{children:["$",n.splitPrice.toFixed(2)]})]},s)})),Object(re.a)(t.splitFees.keys()).map((function(e,s){return Object(a.jsxs)("p",{className:ue.a.DetailRow,children:[Object(a.jsx)("span",{children:e}),Object(a.jsxs)("span",{children:["$",t.splitFees.get(e).toFixed(2)]})]},s)}))]}):null})]},s)}))}),Object(a.jsxs)("div",{className:ue.a.FeesAndTotal,children:[Object(a.jsxs)("div",{className:ue.a.FeeItem,children:[Object(a.jsx)("span",{className:ue.a.FeeName,children:"Subtotal"}),Object(a.jsxs)("span",{className:ue.a.Amount,children:["$",this.props.subtotal.toFixed(2)]})]}),this.props.fees.map((function(e,t){return Object(a.jsxs)("div",{className:ue.a.FeeItem,children:[Object(a.jsx)("span",{className:ue.a.FeeName,children:e.name}),Object(a.jsxs)("span",{className:ue.a.Amount,children:["$",e.amount]})]},t)})),Object(a.jsxs)("div",{className:ue.a.GrandTotal,children:[Object(a.jsx)("span",{className:ue.a.GrandTotalText,children:"Grand Total"}),Object(a.jsxs)("span",{className:ue.a.Amount,children:["$",this.props.total.toFixed(2)]})]})]})]}),Object(a.jsxs)("div",{className:ue.a.Buttons,children:[Object(a.jsx)("button",{className:ue.a.ViewReceiptButton,onClick:this.props.onNextPage,children:"View Receipt"}),Object(a.jsx)("button",{className:ue.a.CloseButton,children:"Close"})]})]})}}]),s}(n.Component),pe=Object(c.b)((function(e){return{items:e.items,persons:e.persons,subtotal:e.subtotal,fees:e.fees,total:e.total}}),(function(e){return{onNextPage:function(){return e({type:_})}}}))(me),je=s(9),he=s.n(je),be=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:he.a.Receipt,children:[Object(a.jsxs)("div",{className:he.a.ReceiptItems,children:[Object(a.jsx)("div",{className:he.a.Items,children:this.props.items.map((function(e,t){return Object(a.jsxs)("div",{className:he.a.Item,children:[Object(a.jsx)("span",{children:e.name}),Object(a.jsxs)("span",{children:["$",e.price.toFixed(2)]})]},t)}))}),Object(a.jsxs)("div",{className:he.a.FeesAndTotals,children:[Object(a.jsxs)("div",{className:he.a.FeeItem,children:[Object(a.jsx)("span",{className:he.a.FeeName,children:"Subtotal"}),Object(a.jsxs)("span",{className:he.a.Amount,children:["$",this.props.subtotal.toFixed(2)]})]}),this.props.fees.map((function(e,t){return Object(a.jsxs)("div",{className:he.a.FeeItem,children:[Object(a.jsx)("span",{className:he.a.FeeName,children:e.name}),Object(a.jsxs)("span",{className:he.a.Amount,children:["$",parseFloat(e.amount).toFixed(2)]})]},t)})),Object(a.jsxs)("div",{className:he.a.GrandTotal,children:[Object(a.jsx)("span",{className:he.a.GrandTotalText,children:"Grand Total"}),Object(a.jsx)("span",{className:he.a.Amount,children:this.props.total.toFixed(2)})]})]})]}),Object(a.jsxs)("div",{className:he.a.Buttons,children:[Object(a.jsx)("button",{className:he.a.BackToBillButton,onClick:this.props.onGoBack,children:"Back to my bill"}),Object(a.jsx)("button",{className:he.a.CloseButton,children:"Close"})]})]})}}]),s}(n.Component),_e=Object(c.b)((function(e){return{items:e.items,subtotal:e.subtotal,fees:e.fees,total:e.total}}),(function(e){return{onGoBack:function(){return e({type:f})}}}))(be),xe=function(e){Object(u.a)(s,e);var t=Object(m.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=Object(a.jsx)(R,{});return 1===this.props.currentPage?e=Object(a.jsx)(J,{}):2===this.props.currentPage?e=Object(a.jsx)(K,{}):3===this.props.currentPage?e=Object(a.jsx)(ae,{}):4===this.props.currentPage?e=Object(a.jsx)(ie,{}):5===this.props.currentPage?e=Object(a.jsx)(pe,{}):6===this.props.currentPage&&(e=Object(a.jsx)(_e,{})),Object(a.jsx)(W,{children:e})}}]),s}(n.Component),Oe=Object(c.b)((function(e){return{currentPage:e.currentPage}}))(xe),fe=function(e,t){return Object(ne.a)(Object(ne.a)({},e),t)},ve={eventName:"",amountPeople:"",personId:0,itemId:0,currentPage:0,subtotal:0,taxedItemSubtotal:0,items:[],persons:[],fees:[],total:0},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:for(var s=[],a=parseInt(t.amountPeople),n=0;n<a;n++)s.push({personId:n,name:"Person "+n,items:[],splitFees:[],total:0});return fe(e,{currentPage:e.currentPage+1,persons:s,personId:a,eventName:t.eventName,amountPeople:a});case _:return fe(e,{currentPage:e.currentPage+1});case x:var r=e.itemId,o=0;""!==t.price&&(o=parseFloat(t.price));var c=e.items.concat({itemId:r,name:t.name,price:o,persons:[],taxed:!1,splitPrice:0,splitFees:[]}),l=e.subtotal+o;return fe(e,{itemId:r+1,items:c,subtotal:l});case O:var i=e.subtotal-e.items[t.id].price;return fe(e,{items:e.items.filter((function(e,s){return s!==t.id})),subtotal:i});case f:return fe(e,{currentPage:e.currentPage-1});case v:var d=fe(e.persons[t.id],{name:t.event.target.value}),u=Object(re.a)(e.persons);return u[t.id]=d,fe(e,{persons:u});case N:var m=e.amountPeople+1,p=e.persons.concat({personId:e.personId,name:"Person "+e.personId,items:[],splitFees:[]});return fe(e,{personId:e.personId+1,amountPeople:m,persons:p});case I:var j=e.amountPeople-1,h=Object(re.a)(e.items);return h.forEach((function(s){s.persons=s.persons.filter((function(s){return s!==e.persons[t.id].personId}))})),fe(e,{amountPeople:j,persons:e.persons.filter((function(e,s){return s!==t.id})),items:h});case P:var A=Object(re.a)(e.persons),S=Object(re.a)(e.items);if(e.persons[t.selectedPerson].items.includes(e.items[t.selectedItem].itemId)){var B=e.persons[t.selectedPerson].items.filter((function(s){return s!==e.items[t.selectedItem].itemId})),R=fe(e.persons[t.selectedPerson],{items:B});A[t.selectedPerson]=R;var T=e.items[t.selectedItem].persons.filter((function(s){return s!==e.persons[t.selectedPerson].personId})),w=fe(e.items[t.selectedItem],{persons:T});S[t.selectedItem]=w}else{var k=e.persons[t.selectedPerson].items.concat(e.items[t.selectedItem].itemId),y=fe(e.persons[t.selectedPerson],{items:k});A[t.selectedPerson]=y;var M=e.items[t.selectedItem].persons.concat(e.persons[t.selectedPerson].personId),E=fe(e.items[t.selectedItem],{persons:M});S[t.selectedItem]=E}return fe(e,{persons:A,items:S});case g:var H=Object(re.a)(e.items),D=e.taxedItemSubtotal;D=!0===!H[t.selectedItem].taxed?e.taxedItemSubtotal+H[t.selectedItem].price:e.taxedItemSubtotal-H[t.selectedItem].price;var G=fe(H[t.selectedItem],{taxed:!H[t.selectedItem].taxed});return H[t.selectedItem]=G,fe(e,{items:H,taxedItemSubtotal:D});case F:var $=Object(re.a)(e.items),L=$.map((function(e){return fe(e,{taxed:!0})}));return fe(e,{items:L,taxedItemSubtotal:e.subtotal});case C:var V=[];t.fees.forEach((function(t){var s=parseFloat(t.amount)/e.subtotal;"Tax"===t.name&&(s=parseFloat(t.amount)/e.taxedItemSubtotal),V.push({name:t.name,percentage:s})})),console.log("fee percentages",V);var J=Object(re.a)(e.items),U=J.map((function(e){var t=parseFloat(e.price)/e.persons.length,s=new Map;return V.forEach((function(a){var n=a.percentage*t;"Tax"===a.name&&!1===e.taxed&&(n=0),s.set(a.name,n)})),fe(e,{splitPrice:t,splitFees:s})}));console.log("items w/ split",U);var Z=e.persons.map((function(e){var s=0,a=new Map;return e.items.forEach((function(e){var n=U.find((function(t){return e===t.itemId}));s+=n.splitPrice,t.fees.forEach((function(e){var t=0,r=n.splitFees.get(e.name);s+=r,a.has(e.name)&&(t=a.get(e.name)),a.set(e.name,t+r)}))})),fe(e,{splitFees:a,total:s})}));return console.log("items",U),console.log("persons",Z),console.log("total",t.grandTotal),fe(e,{currentPage:e.currentPage+1,items:U,persons:Z,fees:t.fees,total:t.grandTotal});default:return e}},Ie=Object(l.b)(Ne),Pe=Object(a.jsx)(c.a,{store:Ie,children:Object(a.jsx)(Oe,{})});o.a.render(Pe,document.getElementById("root"))}],[[40,1,2]]]);
//# sourceMappingURL=main.1123a081.chunk.js.map